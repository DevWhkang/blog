---
date: '2021-06-18'
title: 'HTTPS λ™μ‘ λ°©μ‹'
categories: ['Network']
summary: 'HTTPS λ™μ‘ λ°©μ‹ κ·Έλ¦¬κ³  SSL/TLS, CA'
thumbnail: '../assets/https/symmetric-key-share.jpg'
---

# Overview

μ΄λ² ν¬μ¤ν…μ€ HTTPSμ λ™μ‘ λ°©μ‹μ— λ€ν•μ—¬ μ •λ¦¬ν•λ‹¤. λ™μ‘ λ°©μ‹μ„ μ •λ¦¬ν•  λ• λ€μΉ­ ν‚¤, λΉ„λ€μΉ­ ν‚¤(κ³µκ° ν‚¤), HTTP, TCP, TLS, SSLμ— λ€ν• λ‚΄μ©μ€ κµ¬μ²΄μ μΌλ΅ λ‹¤λ£¨μ§€ μ•λ”λ‹¤. μ΄ ν¬μ¤νΈλ¥Ό μ½μΌμ‹λ” λ¶„λ“¤μ€ μ•„λ Prerequisitesλ¥Ό μ•κ³  μλ‹¤κ³  κ°€μ •ν•΄μ„ μ‘μ„±ν•λ‹¤.

## Prerequisites

- Symmetric key
- Public-Private key pair - Asymmetric key
- HTTP, TCP, TLS, SSL


> λ³Έ ν¬μ¤ν…μ—μ„ μ λ»λ μ •λ³΄κ°€ μλ‹¤λ©΄ λ“κΈ€λ΅ μ§€μ ν•΄ μ£Όμ‹λ©΄ μ κ·Ή λ°μν•κ² μµλ‹λ‹¤.


# SSL=TLS Protocal Layers

λ¨Όμ €, HTTPSμ™€ SSL κ·Έλ¦¬κ³  TLSλ¥Ό λ¨Όμ € κ°€λ³κ² μ •λ¦¬ν•λ‹¤. HTTPSλ” Hypertext Transfer Protocol over Secure Socket Layerμ μ•½μμ΄λ‹¤. HTML λ¬Έμ„λ¥Ό ν†µμ‹ ν•κΈ° μ„ν• κ·μ•½μΈλ° SSL(Secure Socket Layer) μ„μ—μ„ μ΄λ£¨μ–΄μ§€λ” κ²ƒμ΄λ‹¤. μ¦‰, HTTP(Hypertext Transfer Protocol)κ°€ μ–΄λ–¤ λ³΄μ• μ²΄κ³„(SSL)λ¥Ό μ‚¬μ©ν•μ—¬ ν†µμ‹ ν•κ² λλ” ν”„λ΅ν† μ½ λ°©μ‹μ„ HTTPSλΌκ³  ν•λ‹¤.


![ssl](../assets/https/ssl.jpg)


μΌλ°μ μΈ λ„¤νΈμ›ν¬ ν†µμ‹ μ—μ„ μΈν„°λ„· ν”„λ΅ν† μ½μ€ κΈ°λ°€μ„±μ„ μ μ§€ν•μ§€ λ»ν•΄ λ³΄μ•μ„±μ΄ λ‚®λ‹¤. μ΄λ¥Ό λ³΄μ™„ν•κΈ° μ„ν•΄ ν†µμ‹  κ·μ•½ ν”„λ΅ν† μ½μ΄ μƒκ²Όλ”λ°, μ΄κ² SSLμ΄λ‹¤. HTTP ν”„λ΅ν† μ½μ΄ SSLμ΄λΌλ” λ³΄μ• μ²΄κ³„λ¥Ό κ°–μ¶ ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•κ² λλ©΄ HTTPSκ°€ λλ” κ²ƒμ΄κ³  FTPλ” SFTPκ°€ λλ” κ²ƒμ΄λ‹¤. 

SSLμ€ λ„·μ¤μΌ€μ΄ν”„κ°€ λ§λ“¤μ—λ‹¤. SSLμ΄ λ€μ¤‘ν™”λλ©΄μ„ κµ­μ  ν‘μ¤€ν™” κΈ°κµ¬(IETF)λ΅ λ„μ–΄κ°”λ‹¤. λ„μ–΄κ°€μ„ SSLμ€ TLS(Transport Layer Security)λΌλ” μ΄λ¦„μΌλ΅ λ³€κ²½λμ—λ‹¤. κ·Έλμ„ HTTPS κ΄€λ ¨ μ—λ¬κ°€ λ°μƒν–μ„ λ• TLSλΌλ” μ©μ–΄λ¥Ό μμ£Ό λ³Ό μ μλ‹¤. ν•μ§€λ§, μ „ν†µμ μΈ μ΄μ ?λ΅ μΈν•΄ SSLμ΄ λ” λ§μ΄ μ“°μ΄λ” μ©μ–΄λΌκ³  μƒκ°ν•λ©΄ μΆ‹κ² λ‹¤.

κ·Έλ ‡λ‹¤λ©΄ SSLμ—μ„ μ–΄λ–»κ² κΈ°λ°€μ„±μ„ μ μ§€ν•μ—¬ λ³΄μ•μ„ κ°•ν™”ν•λ”μ§€ μ•μ•„λ³΄λ„λ΅ ν•μ.

# ν‚¤λ¥Ό κ³µμ ν•μ—¬ μ •λ³΄λ¥Ό μ•”νΈν™”

λ΅κ·ΈμΈμ΄λ‚, κ²°μ  λ“±μ μ¤‘μ”ν• μ •λ³΄λ¥Ό ν†µμ‹ ν•΄μ•Ό ν•  λ• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” HTTPS ν”„λ΅ν† μ½μ„ ν†µν•΄ κΈ°λ°€μ„±μ„ μ μ§€ν•κ³  λ³΄μ•μ„ κ°•ν™”ν•μ—¬ ν†µμ‹ ν•λ‹¤. μ΄λ• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ™μΌν• ν‚¤λ¥Ό κ³µμ ν•κ³  μμ–΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ •λ³΄(λ©”μ‹μ§€)λ¥Ό ν•΄λ‹Ή ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μ„λ²„λ΅ μ”μ²­μ„ λ³΄λ‚Έλ‹¤. μ„λ²„λ” μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό κ³µμ ν•κ³  μλ” κ°™μ€ ν‚¤λ΅ λ³µνΈν™” ν•μ—¬ μ •λ³΄(λ©”μ‹μ§€)λ¥Ό ν™•μΈν•λ‹¤. κ·Έλ°λ° μ΄λ° λ€μΉ­ ν‚¤ κ³µμ  λ°©μ‹μ€ λ™μΌν• ν‚¤λ¥Ό κ³µμ ν•λ” λ°λ” λ‹¨μ μ΄ μλ‹¤. μµμ΄ ν• λ²μ€ ν‚¤λ¥Ό μ£Όκ³ λ°›μ•„μ•Ό ν•κΈ° λ•λ¬Έμ— μ¤‘κ°„μ— ν•΄μ»¤κ°€ μ΄λ¥Ό κ°€λ΅μ± μ μλ‹¤. μ΄λ° μ΄μ λ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν•κΈ° μ„ν•΄ λΉ„λ€μΉ­ ν‚¤(κ³µκ° ν‚¤) λ°©μ‹μΌλ΅ κ³µμ ν•κ³ μ ν•λ” λ€μΉ­ ν‚¤λ¥Ό μ£Όκ³ λ°›λ”λ‹¤. μ΄λ° SSL λ³΄μ• μ²΄κ³„ λ°©μ‹μΌλ΅ HTTPλ” HTTPSλ΅μ¨ λ™μ‘ν•λ‹¤.

## λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν•κΈ° μ„ν• λΉ„λ€μΉ­ ν‚¤(κ³µκ° ν‚¤) λ°©μ‹

μ•μΌλ΅ λΉ„λ€μΉ­ ν‚¤λ¥Ό κ³µκ° ν‚¤λΌκ³  ν•κ² λ‹¤. μ„λ²„λ” μμ‹ μ κ°μΈ ν‚¤(private key)μ™€ κ³µκ° ν‚¤(public key)λ¥Ό κ°€μ§€κ³  μλ‹¤. μ‚¬μ©μκ°€ λΈλΌμ°μ €λ¥Ό ν†µν•΄ μ„λ²„μ— μ›Ή νμ΄μ§€λ¥Ό μ”μ²­ν•λ©΄ μ„λ²„λ” κ³µκ° ν‚¤λ¥Ό λΈλΌμ°μ €λ΅ μ‘λ‹µν•λ‹¤. κ·Έλ¬λ©΄ λΈλΌμ°μ €λ” μ„λ²„μ κ³µκ° ν‚¤λ¥Ό κ°–κ² λλ‹¤.


![public-key-send](../assets/https/public-key-send.jpg)


μ΄μ  ν΄λΌμ΄μ–ΈνΈλ” κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  μλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” Handshake λ‹¨κ³„(λ‚μλ¥Ό μ£Όκ³ λ°›μΌλ©°, μ•”νΈν™”μ— μ‚¬μ©λ  μ•κ³ λ¦¬μ¦μ„ ν•©μν•λ‹¤.)μ—μ„ μ£Όκ³ λ°›μ€ λλ¤ λ°μ΄ν„°(λ‚μ)λ¥Ό κ°€μ§€κ³  ν΄λΌμ΄μ–ΈνΈ κ°μΈ ν‚¤λ¥Ό λ§λ“ λ‹¤. κ·Έλ¦¬κ³  μ „λ‹¬λ°›μ€ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ¥Ό μ§„ν–‰ν•λ‹¤. μ„λ²„μ κ³µκ° ν‚¤λ΅ μ•”νΈν™”λ ν΄λΌμ΄μ–ΈνΈ κ°μΈ ν‚¤λ¥Ό μ„λ²„μ—κ² μ „μ†΅ν•λ‹¤.


![symmetric-key-share](../assets/https/symmetric-key-share.jpg)


μ΄μ  ν΄λΌμ΄μ–ΈνΈ, μ„λ²„ λ¨λ‘ μ„λ²„μ κ³µκ°ν‚¤μ™€ ν΄λΌμ΄μ–ΈνΈ κ°μΈ ν‚¤λ¥Ό κ°€μ§€κ² λλ‹¤. μ΄ λ‘ κ°€μ§€ ν‚¤λ¥Ό κ°€μ§€κ³  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ λ€μΉ­ ν‚¤λ¥Ό λ§λ“ λ‹¤. κ²°κ³Όμ μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν•κ² λλ‹¤. μ΄λ ‡κ² κ³µμ λ λ€μΉ­ν‚¤λ¥Ό κ°€μ§€κ³  μ›Ή μ‚¬μ΄νΈ μ”μ²­κ³Ό μ‘λ‹µκ³Ό κ°™μ€ λ©”μ‹μ§€λ¥Ό μ•”νΈν™”ν•μ—¬ μ£Όκ³ λ°›κ² λλ‹¤. μ΄λ” λ€μΉ­ ν‚¤μ λ‹¨μ (μµμ΄ ν• λ²μ€ λ…Έμ¶λ  μ μλ” μƒνƒλ΅ ν‚¤λ¥Ό μ „μ†΅ν•΄μ•Ό ν•¨)μ„ κ·Ήλ³µν•κΈ° μ„ν•΄ κ³µκ° ν‚¤ λ°©μ‹μ„ μ΄μ©ν•μ—¬ μ 3μκ°€ κ°€λ΅μ± μ μ—†λ” λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν•κ² λ κ²ƒμ΄λ‹¤.

# 3rd party certificate

HTTPS ν”„λ΅ν† μ½μ€ κ³µκ° ν‚¤μ™€ λ€μΉ­ ν‚¤μ μ΅°ν•©λ λ°©μ‹μΌλ΅ ν΄λΌμ΄μ–ΈνΈ, μ„λ²„κ°€ ν†µμ‹ ν•κ² λλ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–¤ μ„λ²„μ™€ μΌλ ¨μ κ³Όμ •μ„ ν†µν•΄ λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν–λ‹¤. κ·Έλ°λ°, κ·Έ μ„λ²„λ” μ‹ λΆ°ν•  μ μλ” μ„λ²„μΈκ°€? ν΄λΌμ΄μ–ΈνΈμ μ›Ή νμ΄μ§€ μ”μ²­μ— λ€ν•΄ ν•΄μ»¤κ°€ μλ„μ μΌλ΅ μ‹¤μ  μ„λ²„μ™€ λΉ„μ·ν•κ² λ§λ“¤μ–΄ ν΄λΌμ΄μ–ΈνΈμ—κ² μ κ³µν•λ‹¤λ©΄? 

μλ¥Ό λ“¤μ–΄, ν΄λΌμ΄μ–ΈνΈλ” λ„¤μ΄λ²„ μ„λ²„λ΅ λ©”μΈ νμ΄μ§€λ¥Ό μ”μ²­ν–λ‹¤. κ·Έλ°λ° ν•΄μ»¤κ°€ μ¤‘κ°„μ— ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ κ°€λ΅μ±„μ„ λ„¤μ΄λ²„ λ©”μΈ νμ΄μ§€μ™€ λ‘κ°™μ€ νμ΄μ§€μΈ λ©”μ΄λ²„ νμ΄μ§€λ¥Ό μ‘λ‹µν•κ² λλ” μƒν™©μ΄λΌλ©΄, ν΄λΌμ΄μ–ΈνΈλ” ν•΄μ»¤μ μ„λ²„μ™€ μΌλ ¨μ κ³Όμ •μ„ ν†µν•΄ λ€μΉ­ ν‚¤λ¥Ό κ³µμ ν•κ² λλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” κ·Έκ²ƒλ„ λ¨λ¥Έ μ±„ λ„¤μ΄λ²„κ°€ λ§κ² μ§€... ν•λ©° λ©”μ΄λ²„μ—μ„ λ΅κ·ΈμΈμ„ ν•κ³  μ‡Όν•‘μ„ ν•λ‹¤λ©΄... λ‹Ήμ—°ν ν•΄μ»¤μ—κ² κ°μΈ μ •λ³΄λ¥Ό μ•λ ¤μ£Όκ² λλ” κ²ƒμ΄λ‹¤. μ¦‰, ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–¤ μ„λ²„μ—κ² λ°μ΄ν„° μ”μ²­μ„ ν–μ„ λ• κ·Έ μ–΄λ–¤ μ„λ²„λ” μ‹ λΆ°ν•  μ μλ” μ„λ²„μ΄μ–΄μ•Ό ν•λ‹¤.

## CA(Certificate authority)


![certificate](../assets/https/certificate.jpg)


μ„λ²„λ¥Ό μ‹ λΆ°ν•  μ μλ„λ΅ μ 3μ κΈ°κ΄€μ΄ μ΅΄μ¬ν•λ‹¤. CAλΌκ³  λ¶λ¦¬λ” νΉμ€ Root CertificateλΌλ” κΈ°μ—…μ€ μ—„κ²©ν•κ² κ³µμΈλ κΈ°μ—…μΌλ΅ μ„λ²„κ°€ μ‹ λΆ°ν•  μ μλ” μ„λ²„λΌλ” κ²ƒμ„ μ¦λ…ν•΄ μ£Όλ” κΈ°κ΄€μ΄λ‹¤. μ„λ²„λ” μ‹¬μ‚¬λ¥Ό κ±°μ³ CAμ—κ² μΈμ¦μ„λ¥Ό λ°›κ² λλ‹¤. ν΄λΌμ΄μ–ΈνΈλ” CAλ¥Ό ν†µν•΄ λ‚΄κ°€ λ°μ΄ν„°λ¥Ό μ”μ²­ν•κ³ μ ν•λ” μ„λ²„κ°€ μ‹ λΆ°ν•  μ μλ” μΈμ¦λ μ„λ²„λΌλ” κ²ƒμ„ μ• μ μλ‹¤. CAλ” μ—¬λ¬ κΈ°μ—…μ΄ μμΌλ©° μ΄ κΈ°μ—… λ©λ΅μ€ λΈλΌμ°μ €μ— λ“±λ΅λμ–΄ μλ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² λ°μ΄ν„° μ”μ²­μ„ ν•  λ• μ„λ²„λ” **μ„λ²„μ κ³µκ° ν‚¤μ™€ ν•¨κ» CA κΈ°κ΄€μ—μ„ μΈμ¦λ°›μ€ μΈμ¦μ„λ¥Ό λ³΄λ‚Έλ‹¤.** ν΄λΌμ΄μ–ΈνΈλ” κ³µκ° ν‚¤μ™€ μΈμ¦μ„λ¥Ό λ°›μ€ λ‹¤μ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄ μ¤€ CA κΈ°κ΄€μ„ λΈλΌμ°μ € λ©λ΅μ—μ„ μ°Ύμ•„ μΈμ¦μ„κ°€ μ ν¨ν•μ§€ ν™•μΈν•λ‹¤. μ΄λ΅μ¨ ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ¥Ό μ‹ λΆ°ν•  μ μκ² λκ³  λΈλΌμ°μ € μ£Όμ†μ°½μ—λ” π”“μλ¬Όμ‡  λ¨μ–‘μ΄ λ‚νƒ€λ‚κ² λλ‹¤.


> **CAμ μΈμ¦μ„ μ•”νΈν™”**
>
> CAλ” μ„λ²„μ—κ² λ°κΈ‰ν•΄ μ¤„ μΈμ¦μ„λ¥Ό CAμ κ°μΈ ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ°κΈ‰ν•λ‹¤. λΈλΌμ°μ €λ” CA κΈ°κ΄€ λ©λ΅κ³Ό κ° κΈ°κ΄€μ κ³µκ° ν‚¤λ¥Ό κ°€μ§€κ³  μλ‹¤. κ·Έλμ„ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² μΈμ¦μ„λ¥Ό λ³΄λ‚΄λ©΄ ν΄λΌμ΄μ–ΈνΈλ” μΈμ¦μ„λ¥Ό CAμ κ³µκ° ν‚¤λ΅ λ³µνΈν™” ν•μ—¬ μΈμ¦μ„λ¥Ό ν™•μΈν•λ‹¤.

# μ •λ¦¬

λ³΄λ‹¤ λ” κµ¬μ²΄μ μΈ κ³Όμ •μ΄ μμ§€λ§, μ „μ²΄μ μΈ HTTPSμ λ™μ‘ λ°©μ‹μ— λ€ν•΄ μ•μ•„λ³΄μ•λ‹¤. κ²°κµ­, κΈ°λ°€μ„± μ μ§€λ΅ λ³΄μ• κ°•ν™” κ·Έλ¦¬κ³  μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ μ‹ λΆ°λ¥Ό μ„ν•΄ HTTP ν”„λ΅ν† μ½μ€ SSLμ λ³΄μ• μ²΄κ³„λ¥Ό μ‚¬μ©ν•μ—¬ HTTPSλ΅ λ™μ‘ν•κ² λλ‹¤. 

- κΈ°λ°€μ„± μ μ§€λ¥Ό μ„ν•΄ λ€μΉ­ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€λ¥Ό μ•”νΈν™”ν•λ‹¤. 
- λ€μΉ­ ν‚¤λ” κ³µκ° ν‚¤ λ°©μ‹μ„ ν†µν•΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ•μ „ν•κ² κ³µμ ν•  μ μλ‹¤. 
- μ„λ²„λ¥Ό μ‹ λΆ°ν•κΈ° μ„ν•΄ μ 3μ κ³µμΈλ μΈμ¦ κΈ°κ΄€μ λ„μ›€μ„ λ°›μ•„ μ„λ²„λ¥Ό μ‹ λΆ°ν•  μ μλ‹¤.

